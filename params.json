{
  "name": "Sentiment Analysis of Product Review",
  "tagline": "CS107 Final Project",
  "body": "![](http://i.imgur.com/wYyRKNn.png?1)\r\n\r\n# Project Overview\r\n***\r\n\r\n## Motivation :\r\nSentiment Analysis, is receiving a big attention these days, because of its huge spectrum of applications ranging from product review analysis, campaign feedback, competition bench-marking, customer profiles, political trends, etc...\r\n\r\n<center><img src=\"http://i.imgur.com/hFwQEH3.jpg?1\"></center>\r\n\r\nThere is a huge flow of information going through the internet and social networks. Online discussions are only relevant to people for a couple of days. Nobody actually goes in past to tweets that are older than maybe a week, for instance. This entire humanity archive of discussion could help in many applications if we train machines to understand the sentiment of people towards a specific theme at a specific time. \r\n\r\n## Background\r\n“Sentiment analysis is the computational study of people's opinions, sentiments, emotions, and attitudes.” [Excerpt From: Bing Liu. Sentiment Analysis: Mining Opinions, Sentiments, and Emotions.]. This book is an excellent survey of NLP and SA research.\r\n\r\nGiven the large amount of data available on the Web, it is now possible to investigate high-level Information Retrieval tasks like user's intentions and feelings about facts or objects discussed. [Pang, B., Lee, L., 2008. Opinion mining and sentiment analysis. Foundations and Trends in Information Retrieval] \r\n\r\n\r\n## Challenge :\r\nThere are several things to take into consideration when approaching a Sentiment Analysis task. In general, there are two main approaches: \r\n\r\n- **Sentiment lexicons using Natural Language Processing (NLP) techniques**. A Sentiment lexicon is a list of words that are associated to polarity values (positive or negative). NLP techniques offer a deep level of analysis since they take into account the context words in the sentence. \r\n\r\n- **Machine Learning classification algorithms**. Because sentiment classification is a text classification problem, any existing supervised learning method can be directly applied [Bing Liu]. For example,  naive Bayes classification , logistic regression, support vector machines (SVM), etc..\r\n\r\nIn this work we'll work on ML classification and then try to get into the NLP and experience some of the basic techniques used.\r\n\r\n\r\n## Exploratory Data Analysis\r\n\r\n### The Data\r\n\r\nIn this work we'll use a data-set that we obtained thankfully from [Julian McAuley](http://cseweb.ucsd.edu/~jmcauley/), at the University of San Diego [here](http://jmcauley.ucsd.edu/data/amazon/).\r\n\r\nIt is worth mentioning, their excellent work in SIGIR and KDD papers (listed on the above page).\r\n\r\nThis data-set contains a NJSON formatted product reviews and metadata from Amazon, including 142.8 million reviews spanning May 1996 - July 2014. We have decided to use electronics reviews for this work. Because electronics are not perfect so create a lot of contrasted opinions.\r\n \r\n## Exploratory Data Analysis\r\n### Basic numbers\r\nLet's explore some facts about our data. This is an example of rows :\r\n\r\n- The number of unique users are almost 46K for 50K reviews. So each user has done 1 unique review per product.\r\n\r\n- Using ASIN (Amazon Standard Identification Number) amazon's unique product identifier we find around **3446** products  \r\n\r\nLet's look at at the the number of ratings per product : \r\n\r\n<center><img src=\"http://i.imgur.com/hNUYmi9.png\"></center>\r\n\r\nIt's quite skewed with some extreme best sellers (a headphone from Koss) having 3000 reviews. \r\n\r\n### Simplification of data\r\n\r\n### Understand the rating system in Amazon\r\n\r\nThe rating system used in Amazon is as follows : \r\n\r\n* emotional positive (5 stars)\r\n* rational positive  (4 stars)\r\n* neutral            (3 stars)\r\n* rational negative  (2 stars)\r\n* emotional negative (1 star )\r\n\r\n**The user's star rating is an objective human interpretation of of his own review description. So, we consider that as the ground truth.** \r\n\r\nLet's see the distribution of these ratings in our case\r\n\r\n<center><img src=\"http://i.imgur.com/0kfA4Fr.png\"></center>\r\n\r\n> The ratings are very skewed towards positive feedback. Which is an indication that Amazon is not selling junk at least but it's not going to help in our modeling. We have to have equal likelihood of each class of the ratings. \r\n\r\n## Design decisions on reviews\r\n\r\nIn this work we will have a binary classification. Either Positive or Negative.\r\nWe objectively chose to demarcate each rating at the 2.x level divide, such that star ratings above this level would be marked as “1” and star ratings below this level would be marked as “0” \r\n\r\nWe will collapse the 3, 4 and 5 stars ratings into “1” value, and the 1 and 2 stars ratings into Negative “0”\r\n\r\nSo at the end we'll have only 2 opinions : negative/positive\r\n\r\n<center><img src=\"http://i.imgur.com/gkeTY7a.png\"></center>\r\n\r\n\r\n# PART I :  Machine Learning Classification\r\n***\r\n## Bag of Words\r\n\r\n<center><img src=\"http://i.imgur.com/r430Fjd.jpg?1\"></center>\r\n\r\n\r\nOne of the simplest things to do is to treat each text as a \"bag of words\". We have used the `tm` package in order to construct a Term Document Matrix but our machine couldn't handle such huge number of dimensions. So let's go simpler with `tidytext`. I fact we found that R as a framework is not as rich as Python Scikit in NLP. \r\n\r\n\r\n## Feature Extraction from Bag of Words\r\n\r\nUse `nrc` lexicon as a bag of words in order to remove stemsords. This dataset has sentiments but we're not going to use them for the time being. \r\n\r\nLet's discover the top words for both positive and negative ratings. We use the `wordcloud` package to have a nice display. \r\n\r\n<center><img src=\"http://i.imgur.com/gfHc6rd.png\"></center>\r\n\r\n\r\n## TF-IDF\r\n\r\nTerm Frequency - Inverse Document Frequency is term count within a document weighted against the term's ubiquity within the corpus. This weight is based on the principle that terms occurring in almost every document are therefore less specific to an individual document and should be scaled down. \r\nSo a tf-idf value represents the term's relative importance within a document.\r\n\r\n\r\n## Reduce dimensionality (Single Value Decomposition)\r\n\r\nSuppose we have m words (features) and n documents, Single value decomposition (SVD) of an tall rectangular  m*n matrix is a factorization to orthogonal eigenvectors and eigenvalues. It's basically a PCA but without mean shifting. \r\n\r\nSVD works better in SA because it is able to detect and extract small signals from noisy data. Noisy data here means words that are not significant for prediction.\r\n\r\nIn this context, it is known as latent semantic analysis (LSA).\r\n\r\nThe diagonal vector generated is ordered by importance of each dimension.\r\nLet's graph a cumulative variance:  \r\n\r\n<center><img src=\"http://i.imgur.com/qi8tx1v.png\"></center>\r\n\r\n> Design decision\r\n>\r\n>We have to decide how many dimensions to keep. Looking at the graph we can keep 10% dimensions which represent almost 99% of the features.\r\nThis is curious and a puzzling choice to make. But let's aim for fast processing and later on see if adding more dimensions improves our prediction.\r\n\r\n\r\n## Supervised training\r\n\r\nAs with any ML problemt, we randomly split the data into training and test data. We chose to have 80% for training and 20% for testing.\r\nBelow is the list of algorithms we used :\r\n\r\n- **Naive Bayes**, making the assumption that the probability of each word occurring for a given class is independent.\r\n\r\n- **Support Vector Machine** , SVMs were developed by Cortes & Vapnik (1995) [1] for binary classification. Their approach may be roughly sketched as follows:\r\n\r\n> Class separation: basically, we are looking for the optimal separating hyperplane between the two classes by maximizing the margin between the classes’ closest points —the points lying on the boundaries are called support vectors, and the middle of the margin is our optimal separating hyperplane;\r\n\r\n- **Logistic regression**\r\n\r\n- **Random Forest** where prediction function works similarly to decision trees\r\n\r\n## Conclusion\r\n\r\nIn this section we used a supervised machine learning approach and tried several classification models. From the table below, the algorithmic approach using randomForest gives the best accuracy. we are 25% better than flipping a coin with only a classified bag of words.\r\n\r\n<table class=\"table table-condensed\">\r\n<thead>\r\n<tr class=\"header\">\r\n<th align=\"left\">Method</th>\r\n<th align=\"right\">Accuracy</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr class=\"odd\">\r\n<td align=\"left\">Naive Bayes</td>\r\n<td align=\"right\">0.6670996</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td align=\"left\">Support Vector Machine</td>\r\n<td align=\"right\">0.7367965</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td align=\"left\">Linear Discriminent Analysis</td>\r\n<td align=\"right\">0.7441558</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td align=\"left\">Random Forest</td>\r\n<td align=\"right\">0.7584416</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n\r\n\r\n\r\n\r\n\r\n\r\n# PART II : Sentiment lexicons using Natural Language Processing\r\n***\r\n## Background\r\n\r\nIn the machine learning classification models based on words we've seen that many false positives originate from negations. such as \"not good\", \"don't recommend\", etc..\r\n\r\nIn our work, we'll use the OpenNLP. Which is an API for the apache openNLP framework written in Java. openNLP requires a pre-made models. These are conveniently available to R by installing the respective `openNLPmodels.language` package from the repository at http://datacube.wu.ac.at\r\n\r\n\r\n## Process\r\n\r\nThe following flowchart depicts the proposed process for categorization using NLP\r\n\r\n<center><img src=\"http://i.imgur.com/LVob7Qq.png\"></center>\r\n\r\n## Data review\r\n \r\nAs with any text, we must do a serie of transformations :\r\n\r\n- lowercase\r\n- remove punctuation\r\n- strip white space\r\n\r\n## No-brainer classification using lexicons\r\n\r\nLet's do a basic sentiment analysis from a categorized bag of words, we'll use the Bing lexison provided by `tidytext` package `sentiments`  :\r\n\r\n### Classification\r\n\r\nThe score is obtained from simply \r\n\r\n<!--$$\\hat{Y} = \\frac{ f_{positive} - f_{negative} }{f_{positive} - f_{negative} +1}$$-->\r\n\r\n<center><img src=\"http://i.imgur.com/39waWBY.png\"></center>\r\n\r\nIn the following figure we notice that the red and blue spaces (of +/- classes) are overlapping which explains why applying a scoring gets an accuracy of **67%** \r\n\r\n<center><img src=\"http://i.imgur.com/sTd1rDd.png\"></center>\r\n\r\n### Evaluation of the results\r\n\r\nTo find out what we can enhance, let's visualize the word distribution :\r\n\r\n<center><img src=\"http://i.imgur.com/qQ4AH4i.png\"></center>\r\n\r\nMany positive words like \"recommended\" are found in negative ratings as well. This is due to the negations and polarity inverter adjectives. For example : Not bad, would account for negative just because of the word \"bad\" is there.\r\n\r\nIn the next section, we'll try to use NLP to enhance our classification.\r\n\r\n## A more sophisticated Classification\r\n\r\nIn the following, we'll experiment with an 1-star rated wireless charger from Amazon. This particular review would count for a positive prediction using models that do not take into account the semantics:\r\n\r\n> *\"Bought it in Black Friday sales for good price.I don't like it.not wanna recommend to anybody\"*\r\n\r\n### Sentence chunking and Part-of-Speech tagging\r\n\r\nThe first step is to extract 2 types of phrases :\r\n- Verbal phrases  that may imply opinions. Example : \"I didn't like the design\"\r\n- Noun phrases that may describe the product. Example : The design was not good\"\"\r\n\r\nThe part-of-speech tags meaning is found in the [Penn Treebank Project](https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)\r\n\r\n\r\n**Treebank of Sentence and POS tagging**\r\n\r\n<center><img src=\"http://i.imgur.com/W7KG6sn.png\"></center>\r\n\r\n### Feature identification\r\n\r\nFor the purpose of this work we won't go for a full analysis using penn treebanks. Rather we'll simply identify the following words inside a verbal and noun chunks (phrase):\r\n\r\n- [VB] : verb w/ positive/negative sentiment : like, hate , etc\r\n- [JJ] : adjective w/ positive/negative sentiment : bad, junk\r\n- [RB] : adverb polarity inverter such as : n't, or incr/decrementers such as : too, very, more etc.\r\n\r\n\r\n## Scoring algorithm\r\n\r\nThe idea is to find RB multiplier and look for a VB or JJ surrounding it :\r\nFor example : n't like : will compute 1 x -1\r\n\r\nWe should be able to calculate our sentiment score as the diff between negative and positive counts normalized by the count just like we did before.\r\n\r\n## Interpretation \r\n\r\nJust as before we can plot these 2 positive and negative dimensions :\r\n\r\n<center><img src=\"http://i.imgur.com/qIClfRE.png\"></center>\r\n\r\nNotice how the discriminance of the 2 clusters is higher.\r\n\r\n# Conclusion\r\n\r\nSome of the basic techniques of NLP can enhance the accuracy of sentiment scoring. We went from 68% to 74% with a simple identification of negation-of-adjective (NOA) and negation-of-verb (NOV). And using a randomForest algorithm we achieved nearly 78% accuracy.\r\n\r\nBut, some language forms require a deep analysis. For example :\r\n\r\nSarcasm : \"Great sound when working\"\r\nDeep inverter : \"Not such a good value after all\", polarity inverter adverb is 3-words faraway from its adjective.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}